.PHONY: clean check

################################################
# Build an OCaml program
#

FILES[] =
	bytesTest
	abcTest
	cpoolTest
	revListTest
	asmTest
	astUtil
	closureTransTest
	codegenExprTest
	codegenStmtTest
	codegenClassTest
	overrideTest

PROGRAM = runner

OCAMLINCLUDES += $(SRC)/codegen/
OCAML_LIBS    += $(SRC)/codegen/codegen

OCamlProgram($(PROGRAM), $(FILES))

#############################################################
#
# PHONY Target
#
.DEFAULT: check

check: $(PROGRAM)$(EXE)
	./$(PROGRAM)$(EXE) | ounit-postproc

clean:
	ocaml-clean $(PROGRAM)
