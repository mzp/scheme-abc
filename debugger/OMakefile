# build
OCAMLPACKS[] =
	extlib
	oUnit
	unix

FILES[] =
	socket
	packet
	serialize

UseCamlp4(pa_openin pa_oo pa_field pa_monad)
PROGRAM=../debugger

OCAMLINCLUDES += $(ROOT)/base
OCAML_LIBS    += $(ROOT)/base/base

OCAMLOPT   = ocamlopt -for-pack $(capitalize $(basename $(PROGRAM)))
OCAMLOPTLINK= ocamlopt

.DEFAULT: $(MyOCamlPackage $(PROGRAM), $(FILES))

# test
OUnitTest(socket, socket)
OUnitTest(packet, packet)
OUnitTest(writer, writer)
OUnitTest(serialize, serialize writer)

# phony
.PHONY: clean

clean:
    ocaml-clean
