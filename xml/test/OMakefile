.PHONY: check clean

USE_OCAMLFIND = true
OCAMLPACKS[] =
	xml-light
	extlib
	oUnit

if $(not $(OCAMLFIND_EXISTS))
   eprintln(This project requires ocamlfind, but is was not found.)
   eprintln(You need to install ocamlfind and run "omake --configure".)
   exit 1

OCAMLINCLUDES += ../src

NATIVE_ENABLED = $(OCAMLOPT_EXISTS)
BYTE_ENABLED = true

FILES[] =
    testSupport
    byteTest
    abcTest
    swfmillTest
    codeTest

OCAMLINCLUDES += $(ROOT)/base/
OCAML_LIBS += $(ROOT)/base/base

OUnitTest(byteTest   ,byte parsec)
OUnitTest(abcTest    ,abc parsec disasm byte)
OUnitTest(swfmillTest,swfmill easyXml abc code byte disasm parsec)
OUnitTest(codeTest   ,code easyXml)

#
# PHONY TARGET
#
clean:
	ocaml-clean
